<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Slappy Bird Ultimate</title>
<style>
  body {margin:0; overflow:hidden; font-family:Arial;}
  canvas {display:block; margin:0 auto; background:#70c5ce; border:3px solid #000;}
  .overlay {
    position:absolute; top:0; left:0; width:100%; height:100%;
    background:rgba(0,0,0,0.4); color:white; text-align:center;
    display:flex; flex-direction:column; justify-content:center; align-items:center;
  }
  button {
    padding:10px 20px; margin:5px; font-size:18px; cursor:pointer;
    border:none; border-radius:5px; transition:0.2s;
  }
  button:hover {background:#fff; color:#000;}
  .bird-select {display:flex; justify-content:center; margin:10px;}
  .bird-select div {
    font-size:40px; cursor:pointer; margin:0 10px; transition:0.2s;
  }
  .bird-select div:hover {transform:scale(1.2);}
</style>
</head>
<body>
<div class="overlay" id="menu">
  <h1>ğŸ¦ Slappy Bird Ultimate</h1>
  <p>Select Your Bird:</p>
  <div class="bird-select">
    <div onclick="selectBird('yellow')">ğŸ¤</div>
    <div onclick="selectBird('red')">ğŸ¦</div>
    <div onclick="selectBird('blue')">ğŸ•Šï¸</div>
    <div onclick="selectBird('green')">ğŸ¥</div>
  </div>
  <p>Select Mode:</p>
  <button onclick="startGame('easy')">Ultra Easy</button>
  <button onclick="startGame('classic')">Classic</button>
  <button onclick="startGame('hard')">Hard</button>
  <button onclick="startGame('survival')">Survival</button>
  <p>High Score: <span id="best">0</span></p>
</div>

<canvas id="game" width="400" height="600"></canvas>

<script>
const canvas=document.getElementById('game');
const ctx=canvas.getContext('2d');
const menu=document.getElementById('menu');

let running=false,gameOver=false,frame=0,score=0,gameMode='classic';
let pipeSpeed=2.5,pipeGap=150,birdSkin='yellow';
let pipes=[];

// Load high score
let bestScore=localStorage.getItem('bestScore')||0;
document.getElementById('best').innerText=bestScore;

// Bird
const bird={x:80,y:250,r:18,gravity:0.4,lift:-7,v:0,draw() {
  ctx.save();
  ctx.translate(this.x,this.y);
  const angle=Math.min(Math.max(this.v/10,-0.5),0.5);
  ctx.rotate(angle);
  ctx.font='30px Arial';
  let emoji='ğŸ¤';
  if(birdSkin==='red') emoji='ğŸ¦';
  if(birdSkin==='blue') emoji='ğŸ•Šï¸';
  if(birdSkin==='green') emoji='ğŸ¥';
  ctx.fillText(emoji,-15,15);
  ctx.restore();
},update() {this.v+=this.gravity; this.y+=this.v;
  if(this.y+this.r>canvas.height) endGame();
  if(this.y<0){this.y=0;this.v=0;}
},slap(){this.v=this.lift; flapSound.play();}};

// Sounds
const flapSound=new Audio("data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAIA+AAACABAAZGF0YQgAAAAA");
const hitSound=new Audio("data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAIA+AAACABAAZGF0YQgAAAAA");

// Background clouds
let clouds=[];
for(let i=0;i<5;i++) clouds.push({x:Math.random()*canvas.width,y:Math.random()*200,size:30+Math.random()*20,speed:0.2+Math.random()*0.3});

// Bird selection
function selectBird(color){birdSkin=color; localStorage.setItem('birdSkin',color);}

// Pipe creation
function newPipe(){const top=Math.random()*250+50; pipes.push({x:canvas.width,top:top,bottom:canvas.height-top-pipeGap,passed:false});}
function updatePipes(){pipes.forEach(p=>{p.x-=pipeSpeed;
  if(bird.x+bird.r>p.x && bird.x-bird.r<p.x+60 && (bird.y-bird.r<p.top || bird.y+bird.r>canvas.height-p.bottom)) endGame();
  if(!p.passed && p.x+60<bird.x){p.passed=true; score++; if(gameMode==='survival') pipeSpeed+=0.02;}
}); if(pipes.length && pipes[0].x+60<0) pipes.shift(); if(frame%100===0) newPipe();}
function drawPipes(){ctx.fillStyle='green'; pipes.forEach(p=>{ctx.fillRect(p.x,0,60,p.top); ctx.fillRect(p.x,canvas.height-p.bottom,60,p.bottom);});}

// Draw clouds
function drawClouds(){ctx.fillStyle='white'; clouds.forEach(c=>{ctx.beginPath(); ctx.arc(c.x,c.y,c.size,0,2*Math.PI); ctx.fill(); c.x-=c.speed; if(c.x+c.size<0) c.x=canvas.width+c.size;});}

// Draw score
function drawScore(){ctx.fillStyle='#fff'; ctx.font='24px Arial'; ctx.shadowColor='black'; ctx.shadowBlur=4; ctx.fillText("Score: "+score,10,30);
ctx.fillText("Mode: "+gameMode.charAt(0).toUpperCase()+gameMode.slice(1),10,60); ctx.shadowBlur=0;}

// End game
function endGame(){if(!gameOver){hitSound.play(); gameOver=true; running=false; if(score>bestScore){bestScore=score; localStorage.setItem('bestScore',bestScore);}
menu.style.display='flex'; menu.innerHTML=`<h1>Game Over ğŸ’¥</h1><p>Score: ${score}</p><p>High Score: ${bestScore}</p><button onclick="startGame('${gameMode}')">Restart</button>
<p>Select Mode:</p><button onclick="startGame('easy')">Ultra Easy</button><button onclick="startGame('classic')">Classic</button><button onclick="startGame('hard')">Hard</button><button onclick="startGame('survival')">Survival</button>`;}}

// Game loop
function loop(){if(!running) return; ctx.clearRect(0,0,canvas.width,canvas.height); drawClouds(); bird.update(); bird.draw(); updatePipes(); drawPipes(); drawScore(); frame++; requestAnimationFrame(loop);}

// Start game
function startGame(mode){
  gameMode=mode; menu.style.display='none'; pipes=[]; bird.y=250; bird.v=0; score=0; frame=0; gameOver=false; running=true;
  // Mode settings
  if(gameMode==='easy'){pipeSpeed=1.2; pipeGap=220; bird.gravity=0.25; bird.lift=-5.5; bird.r=15;}
  else if(gameMode==='classic'){pipeSpeed=2.5; pipeGap=150; bird.gravity=0.4; bird.lift=-7; bird.r=18;}
  else if(gameMode==='hard'){pipeSpeed=4; pipeGap=120; bird.gravity=0.5; bird.lift=-7; bird.r=18;}
  else if(gameMode==='survival'){pipeSpeed=2.5; pipeGap=150; bird.gravity=0.4; bird.lift=-7; bird.r=18;}
  loop();
}

// Controls
document.addEventListener('keydown',e=>{if(e.code==='Space') running && bird.slap();});
canvas.addEventListener('click',()=>running && bird.slap());
canvas.addEventListener('touchstart',e=>{e.preventDefault(); running && bird.slap();});

// Load saved bird
if(localStorage.getItem('birdSkin')) birdSkin=localStorage.getItem('birdSkin');

</script>
</body>
</html>

